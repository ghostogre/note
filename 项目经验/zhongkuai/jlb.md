1. **登录接口调用问题**

   **问题**：有些请求是要等待登录完成后调用的，否则登录接口调用后登录状态可能改变，但是如果请求在登录接口调用的时候就发出了会出现难以预料的问题。假如依赖登录状态进行登录操作，那么也存在一个问题，假如切换tab页面的时候（我们知道小程序切换页面是不会重新渲染的），几个页面都有需要依赖登录状态返回的接口，那么在登录接口返回的时候，同时调用要如何处理呢？因为例如小程序并行是有限制接口调用个数的。

   - 依赖请求可以使用 useRequest 里的 ready 或者 useEffect 监听一个全局的请求完成状态（或者登录状态变成true）
   - 使用缓存token请求的时候，返回token失效怎么办？（假设有多个需要token的并行请求）使用 promise.all 的 then 方法处理token失效请求（错误可以被每个请求自己catch），重新发出请求
   - 最后一个问题是，发起登录请求的时候切换页面的话，可能会存在过多的依赖请求。可以在切换页面的时候用一个变量标记页面是否显示，然后判断是否发起依赖请求。

2. **存在就地复用问题**

   **问题**：如下条件渲染，从状态1切换到状态2，我们会发现经常实际上渲染的状态2的View元素上面还是有class1这个类，说明就地复用了之前的节点，仅仅是把里面文本节点替换了。这样的话可能会对显示的样式产生影响，所以假如用户操作会改变condition的话（否则仅仅是进入的时候条件判断的话，是不会出问题的），那么最好给状态2也给一个className（可以是没有任何样式的空class，或者说不要偷懒直接用父级样式，把样式定义到具体元素上）

   ```jsx
   {
     condition ? (
     	<View className='class1'>状态1</View>
     ): (
     	<View>状态2</View>
     )
   }
   
   /** 修正 */
   {
     condition ? (
     	<View className='class1'>状态1</View>
     ): (
     	<View className='class2'>状态2</View>
     )
   }
   ```


